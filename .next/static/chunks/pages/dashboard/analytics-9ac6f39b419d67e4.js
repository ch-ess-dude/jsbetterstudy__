(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{6098:(s,e,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/analytics",function(){return a(6700)}])},6700:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});var t=a(7876),d=a(4232),l=a(1134),r=a(1047);a(5961);var i=a(5994);function n(){let[s,e]=(0,d.useState)([]),[a,r]=(0,d.useState)(!0);(0,d.useEffect)(()=>{let s=!0;return async function(){var a;r(!0);let t=null==(a=(await i.N.auth.getUser()).data)?void 0:a.user;if(!t){e([]),r(!1);return}let{data:d,error:l}=await i.N.from("analytics").select("*").eq("user_id",t.id).order("date",{ascending:!0}).limit(365);l?console.error("analytics load error",l):s&&e(d||[]),r(!1)}(),()=>{s=!1}},[]);let n=s.map(s=>s.date),o=s.map(s=>s.study_time_seconds),c=s.map(s=>s.sessions_completed),m=s.map(s=>s.tasks_completed);return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Analytics"}),a?(0,t.jsx)("div",{children:"Loading..."}):(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"card p-4",children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Study Time (seconds)"}),(0,t.jsx)(l.N1,{data:{labels:n,datasets:[{label:"Study time",data:o,borderColor:"#3b82f6",backgroundColor:"rgba(59,130,246,0.2)"}]},options:{responsive:!0,plugins:{legend:{display:!1}},scales:{x:{type:"time"}}}})]}),(0,t.jsxs)("div",{className:"card p-4",children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Sessions Completed"}),(0,t.jsx)(l.yP,{data:{labels:n,datasets:[{label:"Sessions",data:c,backgroundColor:"#10b981"}]},options:{responsive:!0}})]}),(0,t.jsxs)("div",{className:"card p-4 md:col-span-2",children:[(0,t.jsx)("h3",{className:"font-medium mb-2",children:"Tasks Completed vs Left (last period)"}),(0,t.jsx)(l.Fq,{data:{labels:["Completed","Left"],datasets:[{data:[m.reduce((s,e)=>s+e,0),s.reduce((s,e)=>s.tasks_left+s,0)||0],backgroundColor:["#60a5fa","#f97316"]}]}})]})]})]})}r.t1.register(r.PP,r.kc,r.FN,r.No,r.E8,r.Bs,r.m_,r.s$,r.UA)}},s=>{var e=e=>s(s.s=e);s.O(0,[697,627,636,593,792],()=>e(6098)),_N_E=s.O()}]);